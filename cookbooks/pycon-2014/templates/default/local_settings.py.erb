# -*- coding: utf-8 -*-

# Start by importing all the settings that can be kept in pycon source
# control. Then override with the things that we can only know during
# deployment.

if <%= @is_production %>:
  from pycon.settings.production import *
else
  from pycon.settings.staging import *

DATABASES = {
    'default': {
        'NAME': '<%= @database[:settings][:database] %>',
        'ENGINE': 'django.db.backends.<%= @database[:settings][:engine] %>',
        'USER': '<%= @database[:settings][:username] %>',
        'PASSWORD': '<%= @database[:settings][:password] %>',
        'HOST': '<%= @database[:settings][:hostname] %>',
        'PORT': '<%= @database[:settings][:port]  %>',
    },
}

ALLOWED_HOSTS = [
    '.python.org',
    'staging-pycon.python.org',
     "<%= node["fqdn"] %>"
]

SECRET_KEY = '<%= @secret_key %>'

EMAIL_HOST = "mail.python.org"

ADMINS = (
    ('Ernest W. Durbin III', 'ewdurbin@gmail.com'),
    ('Caktus Pycon Team', 'pycon@caktusgroup.com'),
)

MANAGERS = ADMINS

MEDIA_ROOT = "/srv/staging-pycon.python.org/shared/media/"

# Fill in the hostname for our graylog logging
LOGGING['handlers']['sam_gelf']['host'] = '<%= @graylog_host %>'
